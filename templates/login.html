{% extends "base.html" %}

{% block title %}Sign In - WHACK2025{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='css/login.css') }}">
{% endblock %}

{% block content %}
<div class="login-wrapper">
    <div class="login-left">
        <div class="left-parallax">
            <span class="orb1"></span>
            <span class="orb2"></span>
            <span class="orb3"></span>
        </div>
        <div class="brand-section">
            <div class="brand-logo">WHACK2025</div>
            <div class="brand-tagline" id="brandTagline">
                <span id="taglineText"></span>
            </div>
        </div>
        
        <div class="money-image">
            <img src="{{ url_for('static', filename='images/money.jpg') }}" alt="Animated Money" class="money-img">
        </div>
        
        <div class="features-list">
            <div class="feature-item">
                <span class="feature-icon">•</span>
                Interactive financial games
            </div>
            <div class="feature-item">
                <span class="feature-icon">•</span>
                Learn money management
            </div>
            <div class="feature-item">
                <span class="feature-icon">•</span>
                Review bank transactions
            </div>
            <div class="feature-item">
                <span class="feature-icon">•</span>
                Track your progress
            </div>
        </div>
    </div>
    
    <div class="login-right">
        <div class="login-container">
            <div class="login-header">
                <h1 class="login-title">Welcome Back!</h1>
                <p class="login-subtitle">Sign in to continue your financial journey</p>
            </div>
            
            <form method="POST" class="login-form" id="loginForm">
                <div class="form-field">
                    <label for="email">Email or Username</label>
                    <input type="text" id="email" name="email" placeholder="Enter your email or username" required autofocus>
                </div>
                
                <div class="form-field password-field">
                    <label for="password">Password</label>
                    <input type="password" id="password" name="password" placeholder="Enter your password" required>
                    <button type="button" class="toggle-password" aria-label="Show password" id="togglePassword">Show</button>
                </div>
                
                <button type="submit" class="login-button" id="loginButton">
                    Start Learning
                </button>
            </form>
            
            <div class="login-footer">
                <p>Don't have an account? <a href="{{ url_for('register') }}">Create one here</a></p>
            </div>
        </div>
    </div>
</div>
{% endblock %}

{% block scripts %}
{{ super() }}
<script>
    // Typewriter subtitle
    (function typeTagline(){
        const text = "Your gateway to financial literacy and smart money management.";
        const el = document.getElementById('taglineText');
        if (!el) return;
        let i = 0;
        const tick = () => {
            if (i <= text.length) {
                el.textContent = text.slice(0, i++);
                setTimeout(tick, 18);
            }
        };
        tick();
    })();

    // Show/Hide password toggle
    const togglePassword = document.getElementById('togglePassword');
    const pwd = document.getElementById('password');
    if (togglePassword && pwd) {
        togglePassword.addEventListener('click', () => {
            const show = pwd.getAttribute('type') === 'password';
            pwd.setAttribute('type', show ? 'text' : 'password');
            togglePassword.textContent = show ? 'Hide' : 'Show';
            togglePassword.setAttribute('aria-label', show ? 'Hide password' : 'Show password');
        });
    }

    document.getElementById('loginForm').addEventListener('submit', function(e) {
        const button = document.getElementById('loginButton');
        const originalText = button.textContent;
        
        button.textContent = 'Signing In...';
        button.disabled = true;
        button.style.animation = 'pulse 1s infinite';
        
        setTimeout(() => {
            if (button.disabled) {
                button.textContent = originalText;
                button.disabled = false;
                button.style.animation = '';
            }
        }, 3000);
    });
    
    // Enhanced focus animations
    document.querySelectorAll('.form-field input').forEach((input, index) => {
        input.addEventListener('focus', function() {
            this.parentElement.style.transform = 'translateY(-3px)';
            this.parentElement.style.transition = 'all 0.3s ease';
        });
        
        input.addEventListener('blur', function() {
            this.parentElement.style.transform = 'translateY(0)';
        });
        
        // Staggered animation on page load
        setTimeout(() => {
            input.parentElement.style.opacity = '1';
            input.parentElement.style.transform = 'translateY(0)';
        }, 100 * index);
    });
    
    // Add typing effect animation
    document.querySelectorAll('.form-field input').forEach(input => {
        input.addEventListener('input', function() {
            this.style.borderColor = '#333333';
            setTimeout(() => {
                this.style.borderColor = '#d1d5db';
            }, 200);
        });
    });
    
    // Add pulse animation CSS
    const style = document.createElement('style');
    style.textContent = `
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.02); }
            100% { transform: scale(1); }
        }
    `;
    document.head.appendChild(style);
    
    // Initialize form field animations
    document.querySelectorAll('.form-field').forEach((field, index) => {
        field.style.opacity = '0';
        field.style.transform = 'translateY(20px)';
        field.style.transition = 'all 0.6s ease';
    });

    // Animate features (staggered)
    document.querySelectorAll('.feature-item').forEach((item, idx) => {
        setTimeout(() => item.classList.add('in'), 300 + idx * 300);
    });
</script>
{% endblock %}
